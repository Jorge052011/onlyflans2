

{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Carrito</title>
  {% include 'web/componentes/scripts.html' %}
</head>
<body class="bg-light">
{% include 'web/componentes/navbar.html' %}

<div class="container py-5">
  <h2 class="mb-4">Carrito de compras</h2>

  {% if cart|length == 0 %}
    <div class="alert alert-info">Tu carrito está vacío.</div>
    <a href="{% url 'home' %}" class="btn btn-outline-secondary">Volver al catálogo</a>
  {% else %}
    <div class="table-responsive">
      <table class="table align-middle">
        <thead>
          <tr>
            <th>Producto</th>
            <th class="text-center">Cantidad</th>
            <th class="text-end">Precio</th>
            <th class="text-end">Total</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart %}
          <tr>
            <td>
              <div class="d-flex align-items-center gap-3">
                {% if item.imagen %}
                  <img src="{{ item.imagen }}" style="width:64px;height:64px;object-fit:cover;border-radius:8px;">
                {% endif %}
                <div>{{ item.nombre }}</div>
              </div>
            </td>
            <td class="text-center">{{ item.quantity }}</td>
            <td class="text-end">${{ item.precio }}</td>
            <td class="text-end">${{ item.total }}</td>
            <td class="text-end">
              <form method="post" action="{% url 'cart_remove' item.id %}">
                {% csrf_token %}
                <button class="btn btn-sm btn-outline-danger">Quitar</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <th colspan="3" class="text-end">Total</th>
            <th class="text-end">${{ cart.total }}</th>
            <th></th>
          </tr>
        </tfoot>
      </table>
    </div>

    <div class="d-flex gap-2 justify-content-end">
      <a href="{% url 'home' %}" class="btn btn-outline-secondary">Seguir comprando</a>
      <a href="#" class="btn btn-success disabled">Proceder al pago</a>
    </div>
  {% endif %}
</div>

{% include 'web/componentes/footer.html' %}
</body>
</html>
